targetted_decisions = {

    rename_on = {
		filter = all #Allows targetting everyone
		
		from_potential = { #Player only
			ai = no
			NOT = {
				has_character_flag = hidden_renaming
			}
		}
		potential = { #Non-player, same dynasty as player
			ai = yes
			dynasty = FROM
			has_game_rule = {
				name = rename_family
				value = enabled
			}
		}
		allow = { #Additional check for same dynasty as player
			dynasty = FROM
		}
		effect = { #Create rename message, taken straight from 'Rename anyone'
	        ROOT = {
		        prompt_name = { player = from type = RENAME_CHARACTER_MESSAGE }
	        }
		}
	}


    rename_self = { #2nd command for renaming self to allow localisation changes
		filter = self #Self only
		
		from_potential = { #Player Only
			ai = no
			NOT = {
				has_character_flag = hidden_renaming
			}
		}
		potential = { #Just check if alive
			is_alive = yes
			has_game_rule = {
				name = rename_family
				value = enabled
			}
		}
		allow = { #Always allowed
	        always = yes
		}
		effect = {
	        ROOT = { #Rename message
		        prompt_name = { player = from type = RENAME_CHARACTER_MESSAGE }
	        }
		}
	}
}
decisions = {
	hide_renaming = {
		ai= no
		potential = {
			has_game_rule = {
				name = rename_family
				value = enabled
			}
			NOT = {
				has_character_flag = hidden_renaming
			}
		}
		allow = {
			ai = no
		}
		effect = {
			set_character_flag = hidden_renaming
		}
	}
	show_renaming = {
		ai= no
		potential = {
			has_game_rule = {
				name = rename_family
				value = enabled
			}
			has_character_flag = hidden_renaming
		}
		allow = {
			ai = no
		}
		effect = {
			clr_character_flag = hidden_renaming
		}
	}
}